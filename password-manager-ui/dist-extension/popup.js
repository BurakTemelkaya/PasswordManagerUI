import{u as O,b as W,r as p,o as Y,h as T,A as z,j as e,d as $,g as q,f as R,p as V,q as _,s as Q,t as Z,v as B,w as J,B as X,V as ee,P as se,k as ae,m as te,S as re,c as ne}from"./chunks/Settings-DPz_qw66.js";import"./chunks/config-BY7x5TM5.js";const oe=({onAddPassword:d,onViewPassword:m,onSettings:C,onPasswordGenerator:x,currentUrl:P})=>{const i=O(),{lock:t}=W(),[b,k]=p.useState([]),[K,f]=p.useState(!0),[N,j]=p.useState(null),[w,g]=p.useState(""),[v,o]=p.useState("all"),[r,n]=p.useState(new Map),[a,y]=p.useState(null),[c,S]=p.useState("");p.useEffect(()=>{P?S(P):typeof chrome<"u"&&chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},s=>{if(s[0]?.url)try{const l=new URL(s[0].url);S(l.hostname)}catch{S("")}})},[P]),p.useEffect(()=>{U()},[]);const U=async()=>{try{f(!0),j(null);let s=null;if(typeof chrome<"u"&&chrome.storage?.session&&(s=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey||null),s||(s=sessionStorage.getItem("encryptionKey")||localStorage.getItem("encryptionKey")),!s){j("Oturum sÃ¼resi doldu. LÃ¼tfen yeniden giriÅŸ yapÄ±n."),f(!1);return}const l=await Y();k(l);const u=new Map;await Promise.all(l.map(async h=>{try{const D=await T({encryptedName:h.encryptedName,encryptedUserName:h.encryptedUserName,encryptedPassword:h.encryptedPassword,encryptedDescription:h.encryptedDescription,encryptedWebSiteUrl:h.encryptedWebSiteUrl},s,h.iv);u.set(h.id,{name:D.name,websiteUrl:D.websiteUrl,username:D.username,password:D.password})}catch(D){console.error(`Decrypt error (${h.id}):`,D)}})),n(u)}catch(s){s instanceof z?j(s.getUserMessage()):j("Parolalar yÃ¼klenemedi"),console.error(s)}finally{f(!1)}},L=p.useMemo(()=>{let s=b;if(w){const l=w.toLowerCase();s=s.filter(u=>{const h=r.get(u.id);return h?h.name.toLowerCase().includes(l)||h.username.toLowerCase().includes(l)||h.websiteUrl.toLowerCase().includes(l):!1})}return v==="matching"&&c&&(s=s.filter(l=>{const u=r.get(l.id);if(!u?.websiteUrl)return!1;try{const h=new URL(u.websiteUrl.startsWith("http")?u.websiteUrl:`https://${u.websiteUrl}`);return h.hostname.includes(c)||c.includes(h.hostname)}catch{return u.websiteUrl.toLowerCase().includes(c.toLowerCase())}})),s},[b,w,v,c,r]),I=p.useMemo(()=>c?b.filter(s=>{const l=r.get(s.id);if(!l?.websiteUrl)return!1;try{const u=new URL(l.websiteUrl.startsWith("http")?l.websiteUrl:`https://${l.websiteUrl}`);return u.hostname.includes(c)||c.includes(u.hostname)}catch{return l.websiteUrl.toLowerCase().includes(c.toLowerCase())}}):[],[b,c,r]),F=async(s,l)=>{if(l.stopPropagation(),window.confirm("Bu parolayÄ± silmek istediÄŸinize emin misiniz?"))try{await $({id:s}),k(b.filter(h=>h.id!==s));const u=new Map(r);u.delete(s),n(u)}catch(u){u instanceof z?j(u.getUserMessage()):j("Silme iÅŸlemi baÅŸarÄ±sÄ±z")}},H=async(s,l)=>{l.stopPropagation();const u=r.get(s);u?.username&&(await navigator.clipboard.writeText(u.username),y(`user-${s}`),setTimeout(()=>y(null),2e3))},G=async(s,l)=>{l.stopPropagation();const u=r.get(s);u?.password&&(await navigator.clipboard.writeText(u.password),y(`pass-${s}`),setTimeout(()=>y(null),2e3))},A=async(s,l)=>{l.stopPropagation();const u=r.get(s);u&&typeof chrome<"u"&&chrome.runtime&&(chrome.runtime.sendMessage({type:"AUTOFILL_PASSWORD",username:u.username,password:u.password}),window.close())},E=s=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(s.startsWith("http")?s:`https://${s}`).hostname}&sz=32`}catch{return null}},M=s=>s.charAt(0).toUpperCase();return K?e.jsx("div",{className:"popup-page",children:e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"Parolalar yÃ¼kleniyor..."})]})}):e.jsxs("div",{className:"popup-page popup-dashboard",style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"600px",maxHeight:"600px"},children:[e.jsx("header",{className:"popup-header",style:{padding:"12px 16px",justifyContent:"center",flexShrink:0},children:e.jsx("div",{className:"popup-header-title",style:{fontSize:"18px",fontWeight:"600"},children:"ðŸ” Kasa"})}),e.jsxs("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},children:[c&&I.length>0&&e.jsxs("div",{className:"popup-current-site",children:[e.jsx("div",{className:"popup-current-site-icon",children:"ðŸŒ"}),e.jsxs("div",{className:"popup-current-site-info",children:[e.jsx("div",{className:"popup-current-site-label",children:"Mevcut Site"}),e.jsx("div",{className:"popup-current-site-url",children:c})]}),e.jsxs("span",{className:"popup-match-badge",children:[I.length," eÅŸleÅŸme"]})]}),e.jsx("div",{className:"popup-search",children:e.jsxs("div",{className:"popup-search-wrapper",children:[e.jsx("span",{className:"popup-search-icon",children:"ðŸ”"}),e.jsx("input",{type:"text",className:"popup-search-input",placeholder:"Parola ara...",value:w,onChange:s=>g(s.target.value)})]})}),e.jsxs("div",{className:"popup-quick-actions",children:[e.jsxs("button",{className:"popup-quick-action",onClick:()=>d?d():i("/passwords/add"),children:[e.jsx("span",{className:"popup-quick-action-icon",children:"âž•"}),"Yeni Ekle"]}),e.jsxs("button",{className:"popup-quick-action",onClick:()=>o(v==="matching"?"all":"matching"),children:[e.jsx("span",{className:"popup-quick-action-icon",children:v==="matching"?"ðŸ“‹":"ðŸŽ¯"}),v==="matching"?"TÃ¼mÃ¼":"EÅŸleÅŸenler"]}),e.jsxs("button",{className:"popup-quick-action",onClick:()=>U(),children:[e.jsx("span",{className:"popup-quick-action-icon",children:"ðŸ”„"}),"Yenile"]})]}),e.jsxs("div",{className:"popup-content",style:{paddingBottom:"100px"},children:[N&&e.jsx("div",{className:"popup-alert popup-alert-error",style:{margin:"12px 16px"},children:N}),c&&I.length>0&&v==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"popup-section-header",children:e.jsxs("span",{children:["Bu site iÃ§in (",I.length,")"]})}),e.jsx("div",{className:"popup-password-list",children:I.map(s=>{const l=r.get(s.id),u=l?.websiteUrl?E(l.websiteUrl):null;return e.jsxs("div",{className:"popup-password-item suggested",onClick:()=>m?m(s.id):i(`/passwords/${s.id}`),children:[e.jsx("div",{className:"popup-password-favicon",children:u?e.jsx("img",{src:u,alt:"",onError:h=>{h.target.style.display="none"}}):e.jsx("span",{className:"popup-password-favicon-letter",children:M(l?.name||"P")})}),e.jsxs("div",{className:"popup-password-info",children:[e.jsx("div",{className:"popup-password-name",children:l?.name||"Parola"}),e.jsx("div",{className:"popup-password-username",children:l?.username||"-"})]}),e.jsx("div",{className:"popup-password-actions",children:e.jsx("button",{className:"popup-autofill-btn",onClick:h=>A(s.id,h),title:"Otomatik Doldur",children:"âš¡ Doldur"})})]},`match-${s.id}`)})})]}),e.jsx("div",{className:"popup-section-header",children:e.jsxs("span",{children:[v==="matching"?"EÅŸleÅŸen Parolalar":"TÃ¼m Parolalar"," (",L.length,")"]})}),L.length===0?e.jsxs("div",{className:"popup-empty",children:[e.jsx("div",{className:"popup-empty-icon",children:"ðŸ”"}),e.jsx("div",{className:"popup-empty-title",children:w?"SonuÃ§ bulunamadÄ±":"HenÃ¼z parola yok"}),e.jsx("div",{className:"popup-empty-text",children:w?"FarklÄ± bir arama deneyin":"Ä°lk parolanÄ±zÄ± ekleyerek baÅŸlayÄ±n"}),!w&&e.jsx("button",{className:"popup-btn popup-btn-primary",onClick:()=>d?d():i("/passwords/add"),children:"âž• Yeni Parola Ekle"})]}):e.jsx("div",{className:"popup-password-list",children:L.filter(s=>v!=="all"||!I.find(l=>l.id===s.id)).map(s=>{const l=r.get(s.id),u=l?.websiteUrl?E(l.websiteUrl):null;return e.jsxs("div",{className:"popup-password-item",onClick:()=>m?m(s.id):i(`/passwords/${s.id}`),children:[e.jsx("div",{className:"popup-password-favicon",children:u?e.jsx("img",{src:u,alt:"",onError:h=>{h.target.style.display="none"}}):e.jsx("span",{className:"popup-password-favicon-letter",children:M(l?.name||"P")})}),e.jsxs("div",{className:"popup-password-info",children:[e.jsx("div",{className:"popup-password-name",children:l?.name||"Parola"}),e.jsx("div",{className:"popup-password-username",children:l?.username||"-"})]}),e.jsxs("div",{className:"popup-password-actions",children:[e.jsx("button",{className:`popup-action-btn primary ${a===`user-${s.id}`?"copied":""}`,onClick:h=>H(s.id,h),title:"KullanÄ±cÄ± AdÄ±nÄ± Kopyala",children:a===`user-${s.id}`?"âœ“":"ðŸ‘¤"}),e.jsx("button",{className:`popup-action-btn primary ${a===`pass-${s.id}`?"copied":""}`,onClick:h=>G(s.id,h),title:"ParolayÄ± Kopyala",children:a===`pass-${s.id}`?"âœ“":"ðŸ”‘"}),e.jsx("button",{className:"popup-action-btn success",onClick:h=>A(s.id,h),title:"Otomatik Doldur",children:"âš¡"}),e.jsx("button",{className:"popup-action-btn danger",onClick:h=>F(s.id,h),title:"Sil",children:"ðŸ—‘ï¸"})]})]},s.id)})})]})]})," ",e.jsxs("nav",{style:{background:"var(--bg-sidebar)",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-around",padding:"4px 0",flexShrink:0},children:[e.jsxs("button",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--primary-color)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ "}),e.jsx("span",{style:{fontWeight:"600"},children:"Kasa"})]}),e.jsxs("button",{onClick:()=>x?x():i("/password-generator"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸŽ²"}),e.jsx("span",{children:"Ãœreteci"})]}),e.jsxs("button",{onClick:()=>C?C():i("/settings"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"âš™ï¸"}),e.jsx("span",{children:"Ayarlar"})]}),e.jsxs("button",{onClick:()=>{t(),typeof chrome<"u"&&chrome.runtime&&setTimeout(()=>window.close(),100)},style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ”’"}),e.jsx("span",{children:"Kilitle"})]})]})]})},ie=({id:d,onBack:m,onEdit:C})=>{const[x,P]=p.useState(null),[i,t]=p.useState(null),[b,k]=p.useState(!0),[K,f]=p.useState(null),[N,j]=p.useState(!1),[w,g]=p.useState(null);p.useEffect(()=>{d&&v()},[d]);const v=async()=>{try{k(!0),f(null);let c=null;if(typeof chrome<"u"&&chrome.storage?.session&&(c=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey||null),c||(c=sessionStorage.getItem("encryptionKey")||localStorage.getItem("encryptionKey")),!c){f("Oturum sÃ¼resi doldu. LÃ¼tfen yeniden giriÅŸ yapÄ±n."),k(!1);return}const S=await q(d);if(P(S),!S.iv){f("Bu parola eski format ile kaydedilmiÅŸ."),k(!1);return}try{const U=await T({encryptedName:S.encryptedName,encryptedUserName:S.encryptedUserName,encryptedPassword:S.encryptedPassword,encryptedDescription:S.encryptedDescription,encryptedWebSiteUrl:S.encryptedWebSiteUrl},c,S.iv);t(U)}catch(U){console.error("Decrypt hatasÄ±:",U),f("Åžifre Ã§Ã¶zme baÅŸarÄ±sÄ±z"),k(!1);return}}catch(c){console.error("Parola yÃ¼kleme hatasÄ±:",c),c instanceof z?f(c.getUserMessage()):f("Parola yÃ¼klenemedi")}finally{k(!1)}},o=async(c,S)=>{try{await navigator.clipboard.writeText(c),g(S),setTimeout(()=>g(null),2e3)}catch(U){console.error("Kopyalama hatasÄ±:",U)}},r=()=>{i&&typeof chrome<"u"&&chrome.runtime&&(chrome.runtime.sendMessage({type:"AUTOFILL_PASSWORD",username:i.username,password:i.password}),window.close())},n=async()=>{if(window.confirm("Bu parolayÄ± silmek istediÄŸinize emin misiniz?"))try{k(!0),await $({id:d}),m()}catch(c){console.error("Delete error:",c),f("Silme iÅŸlemi baÅŸarÄ±sÄ±z."),k(!1)}},a=c=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(c.startsWith("http")?c:`https://${c}`).hostname}&sz=32`}catch{return null}};if(b)return e.jsx("div",{className:"popup-page",children:e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]})});if(K||!x)return e.jsxs("div",{className:"popup-page",children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("button",{onClick:m,className:"popup-back-btn",children:"â† Geri"}),e.jsx("span",{className:"popup-header-title",children:"Hata"}),e.jsx("div",{style:{width:32}})]}),e.jsxs("div",{className:"popup-empty",children:[e.jsx("div",{className:"popup-empty-icon",children:"âš ï¸"}),e.jsx("div",{className:"popup-empty-title",children:"Bir hata oluÅŸtu"}),e.jsx("div",{className:"popup-empty-text",children:K||"Parola bulunamadÄ±"}),e.jsx("button",{onClick:m,className:"popup-btn popup-btn-primary",children:"Geri DÃ¶n"})]})]});const y=i?.websiteUrl?a(i.websiteUrl):null;return e.jsxs("div",{className:"popup-page popup-detail-container",children:[e.jsxs("header",{className:"popup-header",children:[e.jsx("button",{onClick:m,className:"popup-back-btn",children:"â† Geri"}),e.jsx("span",{className:"popup-header-title",children:i?.name||"Parola"}),e.jsx("button",{className:"popup-header-btn",onClick:()=>C(d),title:"DÃ¼zenle",children:"âœï¸"})]}),e.jsxs("div",{className:"popup-detail-content popup-content",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"12px",background:"var(--pm-bg-tertiary)",borderRadius:"8px"},children:[e.jsx("div",{className:"popup-password-favicon",children:y?e.jsx("img",{src:y,alt:"",onError:c=>{c.target.style.display="none"}}):e.jsx("span",{className:"popup-password-favicon-letter",children:i?.name?.charAt(0).toUpperCase()||"P"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"14px"},children:i?.name}),i?.websiteUrl&&e.jsx("a",{href:i.websiteUrl,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"12px",color:"var(--pm-primary)",textDecoration:"none"},children:i.websiteUrl})]})]}),e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"KullanÄ±cÄ± AdÄ±"}),e.jsxs("div",{className:"popup-detail-value",children:[e.jsx("span",{className:"popup-detail-value-text",children:i?.username||"-"}),e.jsx("button",{className:`popup-detail-action ${w==="username"?"copied":""}`,onClick:()=>o(i?.username||"","username"),title:"Kopyala",children:w==="username"?"âœ“":"ðŸ“‹"})]})]}),e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"Parola"}),e.jsxs("div",{className:"popup-detail-value mono",children:[e.jsx("span",{className:"popup-detail-value-text",children:N?i?.password:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e.jsx("button",{className:"popup-detail-action",onClick:()=>j(!N),title:N?"Gizle":"GÃ¶ster",children:N?"ðŸ™ˆ":"ðŸ‘ï¸"}),e.jsx("button",{className:`popup-detail-action ${w==="password"?"copied":""}`,onClick:()=>o(i?.password||"","password"),title:"Kopyala",children:w==="password"?"âœ“":"ðŸ“‹"})]})]}),i?.description&&e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"Notlar"}),e.jsx("div",{style:{whiteSpace:"pre-wrap",padding:"10px 12px",background:"var(--pm-bg-tertiary)",borderRadius:"6px",fontSize:"13px",color:"var(--pm-text-secondary)",fontFamily:"var(--pm-font-mono)",minHeight:"60px",border:"1px solid var(--pm-border)"},children:i.description})]}),e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"Bilgiler"}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--pm-text-secondary)"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:["OluÅŸturulma: ",R(x.createdDate)]}),x.updatedDate&&e.jsxs("div",{children:["GÃ¼ncelleme: ",R(x.updatedDate)]})]})]})]}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn",onClick:n,style:{backgroundColor:"#ef4444",color:"white",marginRight:"auto"},children:"ðŸ—‘ï¸ Sil"}),e.jsx("button",{className:"popup-btn popup-btn-success",onClick:r,children:"âš¡ Otomatik Doldur"}),e.jsx("button",{className:"popup-btn popup-btn-secondary",onClick:()=>C(d),children:"âœï¸ DÃ¼zenle"})]})]})},le=({id:d,onSuccess:m,onCancel:C})=>{const[x,P]=p.useState({name:"",username:"",password:"",description:"",websiteUrl:""}),[i,t]=p.useState(!1),[b,k]=p.useState(!0),[K,f]=p.useState(null),[N,j]=p.useState(!1);p.useEffect(()=>{d&&w()},[d]);const w=async()=>{try{k(!0);let r=null;if(typeof chrome<"u"&&chrome.storage?.session&&(r=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey||null),r||(r=sessionStorage.getItem("encryptionKey")||localStorage.getItem("encryptionKey")),!r){f("Encryption key bulunamadÄ±. LÃ¼tfen yeniden giriÅŸ yapÄ±n."),k(!1);return}const n=await q(d),a=await T({encryptedName:n.encryptedName,encryptedUserName:n.encryptedUserName,encryptedPassword:n.encryptedPassword,encryptedDescription:n.encryptedDescription,encryptedWebSiteUrl:n.encryptedWebSiteUrl},r,n.iv);P({name:a.name,username:a.username,password:a.password,description:a.description,websiteUrl:a.websiteUrl})}catch(r){f("Parola yÃ¼klenemedi"),console.error(r)}finally{k(!1)}},g=r=>{const{name:n,value:a}=r.target;P(y=>({...y,[n]:a}))},v=()=>{const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*_+-=[]{}|:;<>?,./";let a="";for(let y=0;y<16;y++)a+=n.charAt(Math.floor(Math.random()*n.length));P(y=>({...y,password:a}))},o=async r=>{if(r.preventDefault(),f(null),!x.name||!x.username||!x.password){f("Ad, kullanÄ±cÄ± adÄ± ve parola gereklidir");return}try{t(!0);let n=null;if(typeof chrome<"u"&&chrome.storage?.session&&(n=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey||null),n||(n=sessionStorage.getItem("encryptionKey")||localStorage.getItem("encryptionKey")),!n){f("Encryption key bulunamadÄ±. LÃ¼tfen yeniden giriÅŸ yapÄ±n.");return}const a=await V({name:x.name,username:x.username,password:x.password,description:x.description,websiteUrl:x.websiteUrl},n),y={id:d,...a};await _(y),m()}catch(n){n instanceof z?f(n.getUserMessage()):n instanceof Error?f(n.message):f("Ä°ÅŸlem baÅŸarÄ±sÄ±z. LÃ¼tfen tekrar deneyiniz."),console.error(n)}finally{t(!1)}};return b?e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]}):e.jsxs("div",{className:"popup-form-container",children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("button",{onClick:C,className:"popup-back-btn",title:"Geri",children:"â† Geri"}),e.jsx("h2",{className:"popup-title",children:"ParolayÄ± DÃ¼zenle"}),e.jsx("div",{style:{width:"32px"}})]}),e.jsxs("form",{onSubmit:o,className:"popup-form",children:[K&&e.jsx("div",{className:"popup-alert popup-alert-error",children:K}),e.jsxs("div",{className:"popup-form-group",children:[e.jsxs("label",{htmlFor:"name",className:"popup-form-label",children:["Parola AdÄ± ",e.jsx("span",{className:"popup-form-required",children:"*"})]}),e.jsx("input",{id:"name",type:"text",name:"name",className:"popup-form-input",value:x.name,onChange:g,placeholder:"Ã¶rn: GitHub Åžifresi",required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{htmlFor:"websiteUrl",className:"popup-form-label",children:"Website URL"}),e.jsx("input",{id:"websiteUrl",type:"url",name:"websiteUrl",className:"popup-form-input",value:x.websiteUrl,onChange:g,placeholder:"https://github.com"})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsxs("label",{htmlFor:"username",className:"popup-form-label",children:["KullanÄ±cÄ± AdÄ± ",e.jsx("span",{className:"popup-form-required",children:"*"})]}),e.jsx("input",{id:"username",type:"text",name:"username",className:"popup-form-input",value:x.username,onChange:g,placeholder:"KullanÄ±cÄ± adÄ±nÄ± girin",required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsxs("label",{htmlFor:"password",className:"popup-form-label",children:["Parola ",e.jsx("span",{className:"popup-form-required",children:"*"})]}),e.jsxs("div",{className:"popup-password-input-wrapper",children:[e.jsx("input",{id:"password",type:N?"text":"password",name:"password",className:"popup-form-input",value:x.password,onChange:g,placeholder:"ParolayÄ± girin",required:!0}),e.jsx("button",{type:"button",onClick:()=>j(!N),className:"popup-input-action",title:N?"Gizle":"GÃ¶ster",children:N?"ðŸ™ˆ":"ðŸ‘ï¸"}),e.jsx("button",{type:"button",onClick:v,className:"popup-input-action",title:"Parola Ã¼ret",children:"ðŸ”"})]})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{htmlFor:"description",className:"popup-form-label",children:"AÃ§Ä±klama"}),e.jsx("textarea",{id:"description",name:"description",className:"popup-form-input popup-form-textarea",value:x.description,onChange:g,placeholder:"Notlar (isteÄŸe baÄŸlÄ±)",rows:3})]}),e.jsxs("div",{className:"popup-form-actions",children:[e.jsx("button",{type:"submit",className:"popup-btn popup-btn-primary",disabled:i,children:i?"Kaydediliyor...":"GÃ¼ncelle"}),e.jsx("button",{type:"button",onClick:C,className:"popup-btn popup-btn-secondary",children:"Ä°ptal"})]})]})]})},pe=({onUnlock:d,onLogout:m})=>{const[C,x]=p.useState(""),[P,i]=p.useState(!1),[t,b]=p.useState(null),[k,K]=p.useState(null),[f,N]=p.useState(null);p.useEffect(()=>{(async()=>{if(typeof chrome<"u"&&chrome.storage){const g=await chrome.storage.local.get(["kdfSalt","kdfIterations","userName"]);g.kdfSalt&&N({salt:g.kdfSalt,iterations:g.kdfIterations?parseInt(g.kdfIterations,10):6e5}),g.userName&&K(g.userName)}else{const g=localStorage.getItem("kdfSalt"),v=localStorage.getItem("kdfIterations"),o=localStorage.getItem("userName");g&&N({salt:g,iterations:v?parseInt(v,10):6e5}),o&&K(o)}})()},[]);const j=async w=>{if(w.preventDefault(),!!C){if(!f){b("GÃ¼venlik parametreleri yÃ¼klenemedi. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n.");return}i(!0),b(null);try{const g=await Q(C,f.salt,f.iterations),v=await Z(g);let o=!0;if(typeof chrome<"u"&&chrome.storage){const r=await chrome.storage.local.get(["encryptionKeyCheck"]);if(r.encryptionKeyCheck)await B(v)!==r.encryptionKeyCheck&&(o=!1);else{b("GÃ¼venlik parametreleri yÃ¼klenemedi. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n."),i(!1);return}}else{const r=localStorage.getItem("encryptionKeyCheck");if(r)await B(v)!==r&&(o=!1);else{b("GÃ¼venlik parametreleri yÃ¼klenemedi. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n."),i(!1);return}}if(!o){b("Master Parola yanlÄ±ÅŸ."),i(!1);return}typeof chrome<"u"&&chrome.storage?.session&&await chrome.storage.session.set({encryptionKey:v}),sessionStorage.setItem("encryptionKey",v),d()}catch(g){console.error(g),b("Bir hata oluÅŸtu.")}finally{i(!1)}}};return e.jsx("div",{className:"popup-page",style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"24px",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:600,marginBottom:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:k?k.substring(0,2).toUpperCase():"ðŸ”’"}),k?e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:600},children:k}),e.jsx("p",{style:{color:"#6b7280",fontSize:"14px",margin:"4px 0 0 0"},children:"Kasa Kilitli"})]}):e.jsx("h3",{style:{margin:0},children:"Kasa Kilitli"})]}),!k&&e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"24px",fontSize:"14px"},children:"KasanÄ±zÄ± aÃ§mak iÃ§in Master ParolanÄ±zÄ± girin."}),t&&e.jsx("div",{className:"alert alert-error",children:t}),e.jsxs("form",{onSubmit:j,style:{width:"100%"},children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"password",value:C,onChange:w=>x(w.target.value),placeholder:"Master Parola",required:!0,autoFocus:!0,className:"input",style:{width:"100%"}})}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:P,children:P?"AÃ§Ä±lÄ±yor...":"KasayÄ± AÃ§"})]}),e.jsx("div",{style:{marginTop:"20px",marginBottom:"20px",textAlign:"center"},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:"veya"})}),e.jsx("button",{onClick:m,className:"btn btn-outline btn-block",children:"Ã‡Ä±kÄ±ÅŸ Yap"})]})})},ce=({onBack:d,onDashboard:m,onSettings:C,onGenerate:x})=>{const{lock:P}=W(),i=typeof chrome<"u"&&!!chrome.runtime&&!!chrome.runtime.id,[t,b]=p.useState({length:16,uppercase:!0,lowercase:!0,numbers:!0,special:!0,minNumbers:1,minSpecial:1,avoidAmbiguous:!1}),[k,K]=p.useState(""),[f,N]=p.useState(!1),j={uppercase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",lowercase:"abcdefghijklmnopqrstuvwxyz",numbers:"0123456789",special:"!@#$%^&*()_+~`|}{[]:;?><,./-="},w=p.useCallback(()=>{let o="",r="";if(t.uppercase){let a=j.uppercase;t.avoidAmbiguous&&(a=a.replace(/[IlO]/g,"")),o+=a,r+=a[Math.floor(Math.random()*a.length)]}if(t.lowercase){let a=j.lowercase;t.avoidAmbiguous&&(a=a.replace(/[l]/g,"")),o+=a,r+=a[Math.floor(Math.random()*a.length)]}if(t.numbers){let a=j.numbers;t.avoidAmbiguous&&(a=a.replace(/[10]/g,"")),o+=a;for(let y=0;y<t.minNumbers;y++)r+=a[Math.floor(Math.random()*a.length)]}if(t.special){let a=j.special;o+=a;for(let y=0;y<t.minSpecial;y++)r+=a[Math.floor(Math.random()*a.length)]}if(!o){K("");return}let n=r;for(let a=r.length;a<t.length;a++)n+=o[Math.floor(Math.random()*o.length)];n=n.split("").sort(()=>.5-Math.random()).join(""),n.length>t.length&&(n=n.substring(0,t.length)),K(n),N(!1),x&&x(n)},[t,x]);p.useEffect(()=>{w()},[w]);const g=()=>{navigator.clipboard.writeText(k),N(!0),setTimeout(()=>N(!1),2e3)},v=()=>{const o=t.length;return o<8?"#ef4444":o<12?"#f59e0b":o<16?"#3b82f6":"#10b981"};return e.jsxs("div",{className:"popup-page popup-dashboard",style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"600px",maxHeight:"600px"},children:[e.jsx("header",{className:"popup-header",style:{padding:"12px 16px",justifyContent:"center",flexShrink:0},children:e.jsx("div",{className:"popup-header-title",style:{fontSize:"18px",fontWeight:"600"},children:"ðŸŽ² Parola Ãœretici"})}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:i?"0":"16px",display:i?"flex":"block",flexDirection:"column"},children:e.jsxs("div",{className:i?"":"card",style:{padding:"24px",background:i?"transparent":"var(--bg-card)",borderRadius:i?"0":"12px",width:"100%",margin:i?"auto 0":"0"},children:[e.jsxs("div",{style:{background:"var(--bg-input)",padding:"16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${v()}`,maxHeight:"120px",overflowY:"auto"},children:[e.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",fontFamily:"monospace",wordBreak:"break-all",color:"var(--text-primary)"},children:k}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:w,className:"btn-icon",title:"Yenile",children:"ðŸ”„"}),e.jsx("button",{onClick:g,className:"btn-icon",title:"Kopyala",children:f?"âœ…":"ðŸ“‹"})]})]}),e.jsxs("div",{className:"generator-options",children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("label",{children:"Uzunluk"}),e.jsx("span",{style:{fontWeight:"bold",color:v()},children:t.length})]}),e.jsx("input",{type:"range",min:"5",max:"128",value:t.length,onChange:o=>b({...t,length:parseInt(o.target.value)}),style:{width:"100%",cursor:"pointer"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.uppercase,onChange:o=>b({...t,uppercase:o.target.checked})}),"A-Z (BÃ¼yÃ¼k Harf)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.lowercase,onChange:o=>b({...t,lowercase:o.target.checked})}),"a-z (KÃ¼Ã§Ã¼k Harf)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.numbers,onChange:o=>b({...t,numbers:o.target.checked})}),"0-9 (Rakamlar)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:t.special,onChange:o=>b({...t,special:o.target.checked})}),"!@# (Ã–zel Karakter)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",gridColumn:"span 2"},children:[e.jsx("input",{type:"checkbox",checked:t.avoidAmbiguous,onChange:o=>b({...t,avoidAmbiguous:o.target.checked})}),"Benzer Karakterleri Ã–nle (l, 1, O, 0)"]})]}),e.jsx("div",{style:{marginTop:"20px",borderTop:"1px solid var(--border-color)",paddingTop:"16px"},children:e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"13px",display:"block",marginBottom:"4px"},children:"Min. Rakam"}),e.jsx("input",{type:"number",min:"0",max:"10",value:t.minNumbers,onChange:o=>b({...t,minNumbers:parseInt(o.target.value)}),className:"input",style:{padding:"8px"},disabled:!t.numbers})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"13px",display:"block",marginBottom:"4px"},children:"Min. Ã–zel Karakter"}),e.jsx("input",{type:"number",min:"0",max:"10",value:t.minSpecial,onChange:o=>b({...t,minSpecial:parseInt(o.target.value)}),className:"input",style:{padding:"8px"},disabled:!t.special})]})]})})]})]})}),e.jsxs("nav",{style:{background:"var(--bg-sidebar)",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-around",padding:"4px 0",flexShrink:0},children:[e.jsxs("button",{onClick:()=>m?m():d?.(),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ "}),e.jsx("span",{children:"Kasa"})]}),e.jsxs("button",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--primary-color)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸŽ²"}),e.jsx("span",{style:{fontWeight:"600"},children:"Ãœreteci"})]}),e.jsxs("button",{onClick:()=>C?.(),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"âš™ï¸"}),e.jsx("span",{children:"Ayarlar"})]}),e.jsxs("button",{onClick:()=>{P(),typeof chrome<"u"&&chrome.runtime&&setTimeout(()=>window.close(),100)},style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ”’"}),e.jsx("span",{children:"Kilitle"})]})]})]})},de=()=>{const[d,m]=p.useState({page:"dashboard"}),[C,x]=p.useState(!0);p.useEffect(()=>{(async()=>{let n=null,a=!1;if(typeof chrome<"u"&&chrome.storage)try{let y;chrome.storage.session&&(y=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey),y?(sessionStorage.setItem("encryptionKey",y),a=!0):(sessionStorage.removeItem("encryptionKey"),a=!1);let c;chrome.storage.session&&(c=(await chrome.storage.session.get(["authToken"])).authToken);const S=await chrome.storage.local.get(["authToken","refreshToken"]);n=c||S.authToken||null,n?localStorage.setItem("authToken",n):localStorage.removeItem("authToken")}catch(y){console.warn("Chrome storage okuma hatasÄ±:",y)}else n=localStorage.getItem("authToken"),a=!!sessionStorage.getItem("encryptionKey");m(n?a?{page:"dashboard"}:{page:"unlock-vault"}:{page:"login"}),x(!1)})()},[]);const P=()=>{localStorage.getItem("authToken")&&m({page:"dashboard"})},i=()=>{m({page:"register"})},t=()=>{m({page:"login"})},b=()=>{m({page:"login"})},k=()=>{m({page:"add-password"})},K=r=>{m({page:"view-password",passwordId:r})},f=r=>{m({page:"edit-password",passwordId:r})},N=()=>{m({page:"dashboard"})},j=()=>{m({page:"dashboard"})},w=()=>{m({page:"settings"})},g=()=>{localStorage.clear(),sessionStorage.clear(),typeof chrome<"u"&&chrome.storage&&(chrome.storage.session?.remove(["authToken","encryptionKey"]),chrome.storage.local?.remove(["authToken","encryptionKeyCheck","refreshToken","passwords"])),m({page:"login"})},v=()=>{m({page:"password-generator"})},o=()=>{m({page:"dashboard"})};return C?e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]}):d.page==="unlock-vault"?e.jsx("div",{className:"popup-page",style:{height:"100%",minHeight:"500px"},children:e.jsx(pe,{onUnlock:o,onLogout:g})}):d.page==="login"?e.jsx("div",{className:"popup-page popup-auth",children:e.jsx(ae,{onLoginSuccess:P,onRegister:i})}):d.page==="register"?e.jsx("div",{className:"popup-page popup-auth",children:e.jsx(te,{onRegisterSuccess:t,onBackToLogin:b})}):d.page==="dashboard"?e.jsx("div",{className:"popup-page popup-dashboard",children:e.jsx(oe,{onAddPassword:k,onViewPassword:K,onSettings:w,onPasswordGenerator:v})}):d.page==="password-generator"?e.jsx(ce,{onDashboard:j,onSettings:w,onBack:j}):d.page==="settings"?e.jsx(re,{onDashboard:j,onGenerator:v,onBack:j,onLogout:g}):d.page==="add-password"?e.jsx("div",{className:"popup-page popup-form",children:e.jsx(ne,{onSuccess:N,onCancel:j})}):d.page==="view-password"&&d.passwordId?e.jsx("div",{className:"popup-page popup-detail",children:e.jsx(ie,{id:d.passwordId,onBack:j,onEdit:f})}):d.page==="edit-password"&&d.passwordId?e.jsx("div",{className:"popup-page popup-form",children:e.jsx(le,{id:d.passwordId,onSuccess:j,onCancel:j})}):e.jsxs("div",{className:"popup-page popup-notfound",children:[e.jsx("h2",{children:"Sayfa BulunamadÄ±"}),e.jsx("button",{onClick:j,className:"btn btn-primary",children:"Ana Sayfaya DÃ¶n"})]})};document.getElementById("app")&&J.createRoot(document.getElementById("app")).render(e.jsx(X,{children:e.jsx(ee,{children:e.jsx(se,{children:e.jsx(de,{})})})}));
