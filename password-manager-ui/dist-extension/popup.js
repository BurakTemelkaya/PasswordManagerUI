import{u as O,b as W,r as i,o as Y,h as T,A as z,j as e,d as $,g as F,f as R,p as V,q as _,s as Q,t as Z,v as B,w as J,B as X,V as ee,P as se,k as ae,m as te,S as re,c as ne}from"./chunks/Settings-CPmhJqqg.js";import"./chunks/config-D9A41Bfy.js";const oe=({onAddPassword:p,onViewPassword:d,onSettings:C,onPasswordGenerator:g,currentUrl:P})=>{const s=O(),{lock:N}=W(),[k,f]=i.useState([]),[U,m]=i.useState(!0),[j,y]=i.useState(null),[b,h]=i.useState(""),[r,w]=i.useState("all"),[n,t]=i.useState(new Map),[x,v]=i.useState(null),[l,S]=i.useState("");i.useEffect(()=>{P?S(P):typeof chrome<"u"&&chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},a=>{if(a[0]?.url)try{const o=new URL(a[0].url);S(o.hostname)}catch{S("")}})},[P]),i.useEffect(()=>{I()},[]);const I=async()=>{try{m(!0),y(null);let a=null;if(typeof chrome<"u"&&chrome.storage?.session&&(a=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey||null),a||(a=sessionStorage.getItem("encryptionKey")||localStorage.getItem("encryptionKey")),!a){y("Oturum sÃ¼resi doldu. LÃ¼tfen yeniden giriÅŸ yapÄ±n."),m(!1);return}const o=await Y();f(o);const c=new Map;await Promise.all(o.map(async u=>{try{const D=await T({encryptedName:u.encryptedName,encryptedUserName:u.encryptedUserName,encryptedPassword:u.encryptedPassword,encryptedDescription:u.encryptedDescription,encryptedWebSiteUrl:u.encryptedWebSiteUrl},a,u.iv);c.set(u.id,{name:D.name,websiteUrl:D.websiteUrl,username:D.username,password:D.password})}catch(D){console.error(`Decrypt error (${u.id}):`,D)}})),t(c)}catch(a){a instanceof z?y(a.getUserMessage()):y("Parolalar yÃ¼klenemedi"),console.error(a)}finally{m(!1)}},L=i.useMemo(()=>{let a=k;if(b){const o=b.toLowerCase();a=a.filter(c=>{const u=n.get(c.id);return u?u.name.toLowerCase().includes(o)||u.username.toLowerCase().includes(o)||u.websiteUrl.toLowerCase().includes(o):!1})}return r==="matching"&&l&&(a=a.filter(o=>{const c=n.get(o.id);if(!c?.websiteUrl)return!1;try{const u=new URL(c.websiteUrl.startsWith("http")?c.websiteUrl:`https://${c.websiteUrl}`);return u.hostname.includes(l)||l.includes(u.hostname)}catch{return c.websiteUrl.toLowerCase().includes(l.toLowerCase())}})),a},[k,b,r,l,n]),K=i.useMemo(()=>l?k.filter(a=>{const o=n.get(a.id);if(!o?.websiteUrl)return!1;try{const c=new URL(o.websiteUrl.startsWith("http")?o.websiteUrl:`https://${o.websiteUrl}`);return c.hostname.includes(l)||l.includes(c.hostname)}catch{return o.websiteUrl.toLowerCase().includes(l.toLowerCase())}}):[],[k,l,n]),q=async(a,o)=>{if(o.stopPropagation(),window.confirm("Bu parolayÄ± silmek istediÄŸinize emin misiniz?"))try{await $({id:a}),f(k.filter(u=>u.id!==a));const c=new Map(n);c.delete(a),t(c)}catch(c){c instanceof z?y(c.getUserMessage()):y("Silme iÅŸlemi baÅŸarÄ±sÄ±z")}},G=async(a,o)=>{o.stopPropagation();const c=n.get(a);c?.username&&(await navigator.clipboard.writeText(c.username),v(`user-${a}`),setTimeout(()=>v(null),2e3))},H=async(a,o)=>{o.stopPropagation();const c=n.get(a);c?.password&&(await navigator.clipboard.writeText(c.password),v(`pass-${a}`),setTimeout(()=>v(null),2e3))},A=async(a,o)=>{o.stopPropagation();const c=n.get(a);c&&typeof chrome<"u"&&chrome.runtime&&(chrome.runtime.sendMessage({type:"AUTOFILL_PASSWORD",username:c.username,password:c.password}),window.close())},E=a=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(a.startsWith("http")?a:`https://${a}`).hostname}&sz=32`}catch{return null}},M=a=>a.charAt(0).toUpperCase();return U?e.jsx("div",{className:"popup-page",children:e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"Parolalar yÃ¼kleniyor..."})]})}):e.jsxs("div",{className:"popup-page popup-dashboard",style:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"600px"},children:[e.jsx("header",{className:"popup-header",style:{padding:"12px 16px",justifyContent:"center",flexShrink:0},children:e.jsx("div",{className:"popup-header-title",style:{fontSize:"18px",fontWeight:"600"},children:"ðŸ” Kasa"})}),e.jsxs("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},children:[l&&K.length>0&&e.jsxs("div",{className:"popup-current-site",children:[e.jsx("div",{className:"popup-current-site-icon",children:"ðŸŒ"}),e.jsxs("div",{className:"popup-current-site-info",children:[e.jsx("div",{className:"popup-current-site-label",children:"Mevcut Site"}),e.jsx("div",{className:"popup-current-site-url",children:l})]}),e.jsxs("span",{className:"popup-match-badge",children:[K.length," eÅŸleÅŸme"]})]}),e.jsx("div",{className:"popup-search",children:e.jsxs("div",{className:"popup-search-wrapper",children:[e.jsx("span",{className:"popup-search-icon",children:"ðŸ”"}),e.jsx("input",{type:"text",className:"popup-search-input",placeholder:"Parola ara...",value:b,onChange:a=>h(a.target.value)})]})}),e.jsxs("div",{className:"popup-quick-actions",children:[e.jsxs("button",{className:"popup-quick-action",onClick:()=>p?p():s("/passwords/add"),children:[e.jsx("span",{className:"popup-quick-action-icon",children:"âž•"}),"Yeni Ekle"]}),e.jsxs("button",{className:"popup-quick-action",onClick:()=>w(r==="matching"?"all":"matching"),children:[e.jsx("span",{className:"popup-quick-action-icon",children:r==="matching"?"ðŸ“‹":"ðŸŽ¯"}),r==="matching"?"TÃ¼mÃ¼":"EÅŸleÅŸenler"]}),e.jsxs("button",{className:"popup-quick-action",onClick:()=>I(),children:[e.jsx("span",{className:"popup-quick-action-icon",children:"ðŸ”„"}),"Yenile"]})]}),e.jsxs("div",{className:"popup-content",style:{paddingBottom:"100px"},children:[j&&e.jsx("div",{className:"popup-alert popup-alert-error",style:{margin:"12px 16px"},children:j}),l&&K.length>0&&r==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"popup-section-header",children:e.jsxs("span",{children:["Bu site iÃ§in (",K.length,")"]})}),e.jsx("div",{className:"popup-password-list",children:K.map(a=>{const o=n.get(a.id),c=o?.websiteUrl?E(o.websiteUrl):null;return e.jsxs("div",{className:"popup-password-item suggested",onClick:()=>d?d(a.id):s(`/passwords/${a.id}`),children:[e.jsx("div",{className:"popup-password-favicon",children:c?e.jsx("img",{src:c,alt:"",onError:u=>{u.target.style.display="none"}}):e.jsx("span",{className:"popup-password-favicon-letter",children:M(o?.name||"P")})}),e.jsxs("div",{className:"popup-password-info",children:[e.jsx("div",{className:"popup-password-name",children:o?.name||"Parola"}),e.jsx("div",{className:"popup-password-username",children:o?.username||"-"})]}),e.jsx("div",{className:"popup-password-actions",children:e.jsx("button",{className:"popup-autofill-btn",onClick:u=>A(a.id,u),title:"Otomatik Doldur",children:"âš¡ Doldur"})})]},`match-${a.id}`)})})]}),e.jsx("div",{className:"popup-section-header",children:e.jsxs("span",{children:[r==="matching"?"EÅŸleÅŸen Parolalar":"TÃ¼m Parolalar"," (",L.length,")"]})}),L.length===0?e.jsxs("div",{className:"popup-empty",children:[e.jsx("div",{className:"popup-empty-icon",children:"ðŸ”"}),e.jsx("div",{className:"popup-empty-title",children:b?"SonuÃ§ bulunamadÄ±":"HenÃ¼z parola yok"}),e.jsx("div",{className:"popup-empty-text",children:b?"FarklÄ± bir arama deneyin":"Ä°lk parolanÄ±zÄ± ekleyerek baÅŸlayÄ±n"}),!b&&e.jsx("button",{className:"popup-btn popup-btn-primary",onClick:()=>p?p():s("/passwords/add"),children:"âž• Yeni Parola Ekle"})]}):e.jsx("div",{className:"popup-password-list",children:L.filter(a=>r!=="all"||!K.find(o=>o.id===a.id)).map(a=>{const o=n.get(a.id),c=o?.websiteUrl?E(o.websiteUrl):null;return e.jsxs("div",{className:"popup-password-item",onClick:()=>d?d(a.id):s(`/passwords/${a.id}`),children:[e.jsx("div",{className:"popup-password-favicon",children:c?e.jsx("img",{src:c,alt:"",onError:u=>{u.target.style.display="none"}}):e.jsx("span",{className:"popup-password-favicon-letter",children:M(o?.name||"P")})}),e.jsxs("div",{className:"popup-password-info",children:[e.jsx("div",{className:"popup-password-name",children:o?.name||"Parola"}),e.jsx("div",{className:"popup-password-username",children:o?.username||"-"})]}),e.jsxs("div",{className:"popup-password-actions",children:[e.jsx("button",{className:`popup-action-btn primary ${x===`user-${a.id}`?"copied":""}`,onClick:u=>G(a.id,u),title:"KullanÄ±cÄ± AdÄ±nÄ± Kopyala",children:x===`user-${a.id}`?"âœ“":"ðŸ‘¤"}),e.jsx("button",{className:`popup-action-btn primary ${x===`pass-${a.id}`?"copied":""}`,onClick:u=>H(a.id,u),title:"ParolayÄ± Kopyala",children:x===`pass-${a.id}`?"âœ“":"ðŸ”‘"}),e.jsx("button",{className:"popup-action-btn success",onClick:u=>A(a.id,u),title:"Otomatik Doldur",children:"âš¡"}),e.jsx("button",{className:"popup-action-btn danger",onClick:u=>q(a.id,u),title:"Sil",children:"ðŸ—‘ï¸"})]})]},a.id)})})]})]})," ",e.jsxs("nav",{style:{background:"var(--bg-sidebar)",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-around",padding:"4px 0",flexShrink:0},children:[e.jsxs("button",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--primary-color)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ "}),e.jsx("span",{style:{fontWeight:"600"},children:"Kasa"})]}),e.jsxs("button",{onClick:()=>g?g():s("/password-generator"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸŽ²"}),e.jsx("span",{children:"Ãœreteci"})]}),e.jsxs("button",{onClick:()=>C?C():s("/settings"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"âš™ï¸"}),e.jsx("span",{children:"Ayarlar"})]}),e.jsxs("button",{onClick:()=>{N(),typeof chrome<"u"&&chrome.runtime&&setTimeout(()=>window.close(),100)},style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ”’"}),e.jsx("span",{children:"Kilitle"})]})]})]})},ie=({id:p,onBack:d,onEdit:C})=>{const[g,P]=i.useState(null),[s,N]=i.useState(null),[k,f]=i.useState(!0),[U,m]=i.useState(null),[j,y]=i.useState(!1),[b,h]=i.useState(null);i.useEffect(()=>{p&&r()},[p]);const r=async()=>{try{f(!0),m(null);let l=null;if(typeof chrome<"u"&&chrome.storage?.session&&(l=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey||null),l||(l=sessionStorage.getItem("encryptionKey")||localStorage.getItem("encryptionKey")),!l){m("Oturum sÃ¼resi doldu. LÃ¼tfen yeniden giriÅŸ yapÄ±n."),f(!1);return}const S=await F(p);if(P(S),!S.iv){m("Bu parola eski format ile kaydedilmiÅŸ."),f(!1);return}try{const I=await T({encryptedName:S.encryptedName,encryptedUserName:S.encryptedUserName,encryptedPassword:S.encryptedPassword,encryptedDescription:S.encryptedDescription,encryptedWebSiteUrl:S.encryptedWebSiteUrl},l,S.iv);N(I)}catch(I){console.error("Decrypt hatasÄ±:",I),m("Åžifre Ã§Ã¶zme baÅŸarÄ±sÄ±z"),f(!1);return}}catch(l){console.error("Parola yÃ¼kleme hatasÄ±:",l),l instanceof z?m(l.getUserMessage()):m("Parola yÃ¼klenemedi")}finally{f(!1)}},w=async(l,S)=>{try{await navigator.clipboard.writeText(l),h(S),setTimeout(()=>h(null),2e3)}catch(I){console.error("Kopyalama hatasÄ±:",I)}},n=()=>{s&&typeof chrome<"u"&&chrome.runtime&&(chrome.runtime.sendMessage({type:"AUTOFILL_PASSWORD",username:s.username,password:s.password}),window.close())},t=async()=>{if(window.confirm("Bu parolayÄ± silmek istediÄŸinize emin misiniz?"))try{f(!0),await $({id:p}),d()}catch(l){console.error("Delete error:",l),m("Silme iÅŸlemi baÅŸarÄ±sÄ±z."),f(!1)}},x=l=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(l.startsWith("http")?l:`https://${l}`).hostname}&sz=32`}catch{return null}};if(k)return e.jsx("div",{className:"popup-page",children:e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]})});if(U||!g)return e.jsxs("div",{className:"popup-page",children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("button",{onClick:d,className:"popup-back-btn",children:"â† Geri"}),e.jsx("span",{className:"popup-header-title",children:"Hata"}),e.jsx("div",{style:{width:32}})]}),e.jsxs("div",{className:"popup-empty",children:[e.jsx("div",{className:"popup-empty-icon",children:"âš ï¸"}),e.jsx("div",{className:"popup-empty-title",children:"Bir hata oluÅŸtu"}),e.jsx("div",{className:"popup-empty-text",children:U||"Parola bulunamadÄ±"}),e.jsx("button",{onClick:d,className:"popup-btn popup-btn-primary",children:"Geri DÃ¶n"})]})]});const v=s?.websiteUrl?x(s.websiteUrl):null;return e.jsxs("div",{className:"popup-page popup-detail-container",children:[e.jsxs("header",{className:"popup-header",children:[e.jsx("button",{onClick:d,className:"popup-back-btn",children:"â† Geri"}),e.jsx("span",{className:"popup-header-title",children:s?.name||"Parola"}),e.jsx("button",{className:"popup-header-btn",onClick:()=>C(p),title:"DÃ¼zenle",children:"âœï¸"})]}),e.jsxs("div",{className:"popup-detail-content popup-content",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"12px",background:"var(--pm-bg-tertiary)",borderRadius:"8px"},children:[e.jsx("div",{className:"popup-password-favicon",children:v?e.jsx("img",{src:v,alt:"",onError:l=>{l.target.style.display="none"}}):e.jsx("span",{className:"popup-password-favicon-letter",children:s?.name?.charAt(0).toUpperCase()||"P"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"14px"},children:s?.name}),s?.websiteUrl&&e.jsx("a",{href:s.websiteUrl,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"12px",color:"var(--pm-primary)",textDecoration:"none"},children:s.websiteUrl})]})]}),e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"KullanÄ±cÄ± AdÄ±"}),e.jsxs("div",{className:"popup-detail-value",children:[e.jsx("span",{className:"popup-detail-value-text",children:s?.username||"-"}),e.jsx("button",{className:`popup-detail-action ${b==="username"?"copied":""}`,onClick:()=>w(s?.username||"","username"),title:"Kopyala",children:b==="username"?"âœ“":"ðŸ“‹"})]})]}),e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"Parola"}),e.jsxs("div",{className:"popup-detail-value mono",children:[e.jsx("span",{className:"popup-detail-value-text",children:j?s?.password:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e.jsx("button",{className:"popup-detail-action",onClick:()=>y(!j),title:j?"Gizle":"GÃ¶ster",children:j?"ðŸ™ˆ":"ðŸ‘ï¸"}),e.jsx("button",{className:`popup-detail-action ${b==="password"?"copied":""}`,onClick:()=>w(s?.password||"","password"),title:"Kopyala",children:b==="password"?"âœ“":"ðŸ“‹"})]})]}),s?.description&&e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"Notlar"}),e.jsx("div",{style:{whiteSpace:"pre-wrap",padding:"10px 12px",background:"var(--pm-bg-tertiary)",borderRadius:"6px",fontSize:"13px",color:"var(--pm-text-secondary)",fontFamily:"var(--pm-font-mono)",minHeight:"60px",border:"1px solid var(--pm-border)"},children:s.description})]}),e.jsxs("div",{className:"popup-detail-section",children:[e.jsx("div",{className:"popup-detail-label",children:"Bilgiler"}),e.jsxs("div",{style:{fontSize:"12px",color:"var(--pm-text-secondary)"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:["OluÅŸturulma: ",R(g.createdDate)]}),g.updatedDate&&e.jsxs("div",{children:["GÃ¼ncelleme: ",R(g.updatedDate)]})]})]})]}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn",onClick:t,style:{backgroundColor:"#ef4444",color:"white",marginRight:"auto"},children:"ðŸ—‘ï¸ Sil"}),e.jsx("button",{className:"popup-btn popup-btn-success",onClick:n,children:"âš¡ Otomatik Doldur"}),e.jsx("button",{className:"popup-btn popup-btn-secondary",onClick:()=>C(p),children:"âœï¸ DÃ¼zenle"})]})]})},le=({id:p,onSuccess:d,onCancel:C})=>{const[g,P]=i.useState({name:"",username:"",password:"",description:"",websiteUrl:""}),[s,N]=i.useState(!1),[k,f]=i.useState(!0),[U,m]=i.useState(null),[j,y]=i.useState(!1);i.useEffect(()=>{p&&b()},[p]);const b=async()=>{try{f(!0);const n=localStorage.getItem("encryptionKey");if(!n){m("Encryption key bulunamadÄ±. LÃ¼tfen yeniden giriÅŸ yapÄ±n."),f(!1);return}const t=await F(p),x=await T({encryptedName:t.encryptedName,encryptedUserName:t.encryptedUserName,encryptedPassword:t.encryptedPassword,encryptedDescription:t.encryptedDescription,encryptedWebSiteUrl:t.encryptedWebSiteUrl},n,t.iv);P({name:x.name,username:x.username,password:x.password,description:x.description,websiteUrl:x.websiteUrl})}catch(n){m("Parola yÃ¼klenemedi"),console.error(n)}finally{f(!1)}},h=n=>{const{name:t,value:x}=n.target;P(v=>({...v,[t]:x}))},r=()=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*_+-=[]{}|:;<>?,./";let x="";for(let v=0;v<16;v++)x+=t.charAt(Math.floor(Math.random()*t.length));P(v=>({...v,password:x}))},w=async n=>{if(n.preventDefault(),m(null),!g.name||!g.username||!g.password){m("Ad, kullanÄ±cÄ± adÄ± ve parola gereklidir");return}try{N(!0);const t=localStorage.getItem("encryptionKey");if(!t){m("Encryption key bulunamadÄ±. LÃ¼tfen yeniden giriÅŸ yapÄ±n.");return}const x=await V({name:g.name,username:g.username,password:g.password,description:g.description,websiteUrl:g.websiteUrl},t),v={id:p,...x};await _(v),d()}catch(t){t instanceof z?m(t.getUserMessage()):t instanceof Error?m(t.message):m("Ä°ÅŸlem baÅŸarÄ±sÄ±z. LÃ¼tfen tekrar deneyiniz."),console.error(t)}finally{N(!1)}};return k?e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]}):e.jsxs("div",{className:"popup-form-container",children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("button",{onClick:C,className:"popup-back-btn",title:"Geri",children:"â† Geri"}),e.jsx("h2",{className:"popup-title",children:"ParolayÄ± DÃ¼zenle"}),e.jsx("div",{style:{width:"32px"}})]}),e.jsxs("form",{onSubmit:w,className:"popup-form",children:[U&&e.jsx("div",{className:"popup-alert popup-alert-error",children:U}),e.jsxs("div",{className:"popup-form-group",children:[e.jsxs("label",{htmlFor:"name",className:"popup-form-label",children:["Parola AdÄ± ",e.jsx("span",{className:"popup-form-required",children:"*"})]}),e.jsx("input",{id:"name",type:"text",name:"name",className:"popup-form-input",value:g.name,onChange:h,placeholder:"Ã¶rn: GitHub Åžifresi",required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{htmlFor:"websiteUrl",className:"popup-form-label",children:"Website URL"}),e.jsx("input",{id:"websiteUrl",type:"url",name:"websiteUrl",className:"popup-form-input",value:g.websiteUrl,onChange:h,placeholder:"https://github.com"})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsxs("label",{htmlFor:"username",className:"popup-form-label",children:["KullanÄ±cÄ± AdÄ± ",e.jsx("span",{className:"popup-form-required",children:"*"})]}),e.jsx("input",{id:"username",type:"text",name:"username",className:"popup-form-input",value:g.username,onChange:h,placeholder:"KullanÄ±cÄ± adÄ±nÄ± girin",required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsxs("label",{htmlFor:"password",className:"popup-form-label",children:["Parola ",e.jsx("span",{className:"popup-form-required",children:"*"})]}),e.jsxs("div",{className:"popup-password-input-wrapper",children:[e.jsx("input",{id:"password",type:j?"text":"password",name:"password",className:"popup-form-input",value:g.password,onChange:h,placeholder:"ParolayÄ± girin",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!j),className:"popup-input-action",title:j?"Gizle":"GÃ¶ster",children:j?"ðŸ™ˆ":"ðŸ‘ï¸"}),e.jsx("button",{type:"button",onClick:r,className:"popup-input-action",title:"Parola Ã¼ret",children:"ðŸ”"})]})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{htmlFor:"description",className:"popup-form-label",children:"AÃ§Ä±klama"}),e.jsx("textarea",{id:"description",name:"description",className:"popup-form-input popup-form-textarea",value:g.description,onChange:h,placeholder:"Notlar (isteÄŸe baÄŸlÄ±)",rows:3})]}),e.jsxs("div",{className:"popup-form-actions",children:[e.jsx("button",{type:"submit",className:"popup-btn popup-btn-primary",disabled:s,children:s?"Kaydediliyor...":"GÃ¼ncelle"}),e.jsx("button",{type:"button",onClick:C,className:"popup-btn popup-btn-secondary",children:"Ä°ptal"})]})]})]})},pe=({onUnlock:p,onLogout:d})=>{const[C,g]=i.useState(""),[P,s]=i.useState(!1),[N,k]=i.useState(null),[f,U]=i.useState(null),[m,j]=i.useState(null);i.useEffect(()=>{(async()=>{if(typeof chrome<"u"&&chrome.storage){const h=await chrome.storage.local.get(["kdfSalt","kdfIterations","userName"]);h.kdfSalt&&j({salt:h.kdfSalt,iterations:h.kdfIterations?parseInt(h.kdfIterations,10):6e5}),h.userName&&U(h.userName)}else{const h=localStorage.getItem("kdfSalt"),r=localStorage.getItem("kdfIterations"),w=localStorage.getItem("userName");h&&j({salt:h,iterations:r?parseInt(r,10):6e5}),w&&U(w)}})()},[]);const y=async b=>{if(b.preventDefault(),!!C){if(!m){k("GÃ¼venlik parametreleri yÃ¼klenemedi. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n.");return}s(!0),k(null);try{const h=await Q(C,m.salt,m.iterations),r=await Z(h);let w=!0;if(typeof chrome<"u"&&chrome.storage){const n=await chrome.storage.local.get(["encryptionKeyCheck"]);if(n.encryptionKeyCheck)await B(r)!==n.encryptionKeyCheck&&(w=!1);else{k("GÃ¼venlik parametreleri yÃ¼klenemedi. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n."),s(!1);return}}else{const n=localStorage.getItem("encryptionKeyCheck");if(n)await B(r)!==n&&(w=!1);else{k("GÃ¼venlik parametreleri yÃ¼klenemedi. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n."),s(!1);return}}if(!w){k("Master Parola yanlÄ±ÅŸ."),s(!1);return}typeof chrome<"u"&&chrome.storage?.session&&await chrome.storage.session.set({encryptionKey:r}),sessionStorage.setItem("encryptionKey",r),p()}catch(h){console.error(h),k("Bir hata oluÅŸtu.")}finally{s(!1)}}};return e.jsxs("div",{className:"popup-page",style:{justifyContent:"center",textAlign:"center",padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:600,marginBottom:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:f?f.substring(0,2).toUpperCase():"ðŸ”’"}),f?e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:600},children:f}),e.jsx("p",{style:{color:"#6b7280",fontSize:"14px",margin:"4px 0 0 0"},children:"Kasa Kilitli"})]}):e.jsx("h3",{style:{margin:0},children:"Kasa Kilitli"})]}),!f&&e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"24px",fontSize:"14px"},children:"KasanÄ±zÄ± aÃ§mak iÃ§in Master ParolanÄ±zÄ± girin."}),N&&e.jsx("div",{className:"alert alert-error",children:N}),e.jsxs("form",{onSubmit:y,style:{width:"100%"},children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"password",value:C,onChange:b=>g(b.target.value),placeholder:"Master Parola",required:!0,autoFocus:!0,className:"input",style:{width:"100%"}})}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:P,children:P?"AÃ§Ä±lÄ±yor...":"KasayÄ± AÃ§"})]}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsx("button",{onClick:d,className:"btn-link",style:{fontSize:"13px",color:"var(--text-muted)"},children:"FarklÄ± bir hesapla giriÅŸ yap"})})]})},ce=({onBack:p,onDashboard:d,onSettings:C,onGenerate:g})=>{const{lock:P}=W(),[s,N]=i.useState({length:16,uppercase:!0,lowercase:!0,numbers:!0,special:!0,minNumbers:1,minSpecial:1,avoidAmbiguous:!1}),[k,f]=i.useState(""),[U,m]=i.useState(!1),j={uppercase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",lowercase:"abcdefghijklmnopqrstuvwxyz",numbers:"0123456789",special:"!@#$%^&*()_+~`|}{[]:;?><,./-="},y=i.useCallback(()=>{let r="",w="";if(s.uppercase){let t=j.uppercase;s.avoidAmbiguous&&(t=t.replace(/[IlO]/g,"")),r+=t,w+=t[Math.floor(Math.random()*t.length)]}if(s.lowercase){let t=j.lowercase;s.avoidAmbiguous&&(t=t.replace(/[l]/g,"")),r+=t,w+=t[Math.floor(Math.random()*t.length)]}if(s.numbers){let t=j.numbers;s.avoidAmbiguous&&(t=t.replace(/[10]/g,"")),r+=t;for(let x=0;x<s.minNumbers;x++)w+=t[Math.floor(Math.random()*t.length)]}if(s.special){let t=j.special;r+=t;for(let x=0;x<s.minSpecial;x++)w+=t[Math.floor(Math.random()*t.length)]}if(!r){f("");return}let n=w;for(let t=w.length;t<s.length;t++)n+=r[Math.floor(Math.random()*r.length)];n=n.split("").sort(()=>.5-Math.random()).join(""),n.length>s.length&&(n=n.substring(0,s.length)),f(n),m(!1),g&&g(n)},[s,g]);i.useEffect(()=>{y()},[y]);const b=()=>{navigator.clipboard.writeText(k),m(!0),setTimeout(()=>m(!1),2e3)},h=()=>{const r=s.length;return r<8?"#ef4444":r<12?"#f59e0b":r<16?"#3b82f6":"#10b981"};return e.jsxs("div",{className:"popup-page popup-dashboard",style:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"600px"},children:[e.jsx("header",{className:"popup-header",style:{padding:"12px 16px",justifyContent:"center",flexShrink:0},children:e.jsx("div",{className:"popup-header-title",style:{fontSize:"18px",fontWeight:"600"},children:"ðŸŽ² Parola Ãœretici"})}),e.jsx("div",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",padding:"16px"},children:e.jsxs("div",{className:"card",style:{padding:"24px",background:"var(--bg-card)",borderRadius:"12px"},children:[e.jsxs("div",{style:{background:"var(--bg-input)",padding:"16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${h()}`},children:[e.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",fontFamily:"monospace",wordBreak:"break-all",color:"var(--text-primary)"},children:k}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:y,className:"btn-icon",title:"Yenile",children:"ðŸ”„"}),e.jsx("button",{onClick:b,className:"btn-icon",title:"Kopyala",children:U?"âœ…":"ðŸ“‹"})]})]}),e.jsxs("div",{className:"generator-options",children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("label",{children:"Uzunluk"}),e.jsx("span",{style:{fontWeight:"bold",color:h()},children:s.length})]}),e.jsx("input",{type:"range",min:"5",max:"128",value:s.length,onChange:r=>N({...s,length:parseInt(r.target.value)}),style:{width:"100%",cursor:"pointer"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.uppercase,onChange:r=>N({...s,uppercase:r.target.checked})}),"A-Z (BÃ¼yÃ¼k Harf)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.lowercase,onChange:r=>N({...s,lowercase:r.target.checked})}),"a-z (KÃ¼Ã§Ã¼k Harf)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.numbers,onChange:r=>N({...s,numbers:r.target.checked})}),"0-9 (Rakamlar)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.special,onChange:r=>N({...s,special:r.target.checked})}),"!@# (Ã–zel Karakter)"]}),e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",gridColumn:"span 2"},children:[e.jsx("input",{type:"checkbox",checked:s.avoidAmbiguous,onChange:r=>N({...s,avoidAmbiguous:r.target.checked})}),"Benzer Karakterleri Ã–nle (l, 1, O, 0)"]})]}),e.jsx("div",{style:{marginTop:"20px",borderTop:"1px solid var(--border-color)",paddingTop:"16px"},children:e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"13px",display:"block",marginBottom:"4px"},children:"Min. Rakam"}),e.jsx("input",{type:"number",min:"0",max:"10",value:s.minNumbers,onChange:r=>N({...s,minNumbers:parseInt(r.target.value)}),className:"input",style:{padding:"8px"},disabled:!s.numbers})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{fontSize:"13px",display:"block",marginBottom:"4px"},children:"Min. Ã–zel Karakter"}),e.jsx("input",{type:"number",min:"0",max:"10",value:s.minSpecial,onChange:r=>N({...s,minSpecial:parseInt(r.target.value)}),className:"input",style:{padding:"8px"},disabled:!s.special})]})]})})]})]})}),e.jsxs("nav",{style:{background:"var(--bg-sidebar)",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-around",padding:"4px 0",flexShrink:0},children:[e.jsxs("button",{onClick:()=>d?d():p?.(),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ "}),e.jsx("span",{children:"Kasa"})]}),e.jsxs("button",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--primary-color)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸŽ²"}),e.jsx("span",{style:{fontWeight:"600"},children:"Ãœreteci"})]}),e.jsxs("button",{onClick:()=>C?.(),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"âš™ï¸"}),e.jsx("span",{children:"Ayarlar"})]}),e.jsxs("button",{onClick:()=>{P(),typeof chrome<"u"&&chrome.runtime&&setTimeout(()=>window.close(),100)},style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",border:"none",background:"transparent",color:"var(--text-muted)",cursor:"pointer",padding:"6px 4px",fontSize:"10px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ”’"}),e.jsx("span",{children:"Kilitle"})]})]})]})},de=()=>{const[p,d]=i.useState({page:"dashboard"}),[C,g]=i.useState(!0);i.useEffect(()=>{(async()=>{let t=null,x=!1;if(typeof chrome<"u"&&chrome.storage)try{let v;chrome.storage.session&&(v=(await chrome.storage.session.get(["encryptionKey"])).encryptionKey),v?(sessionStorage.setItem("encryptionKey",v),x=!0):(sessionStorage.removeItem("encryptionKey"),x=!1);let l;chrome.storage.session&&(l=(await chrome.storage.session.get(["authToken"])).authToken);const S=await chrome.storage.local.get(["authToken","refreshToken"]);t=l||S.authToken||null,t?localStorage.setItem("authToken",t):localStorage.removeItem("authToken")}catch(v){console.warn("Chrome storage okuma hatasÄ±:",v)}else t=localStorage.getItem("authToken"),x=!!sessionStorage.getItem("encryptionKey");d(t?x?{page:"dashboard"}:{page:"unlock-vault"}:{page:"login"}),g(!1)})()},[]);const P=()=>{localStorage.getItem("authToken")&&d({page:"dashboard"})},s=()=>{d({page:"register"})},N=()=>{d({page:"login"})},k=()=>{d({page:"login"})},f=()=>{d({page:"add-password"})},U=n=>{d({page:"view-password",passwordId:n})},m=n=>{d({page:"edit-password",passwordId:n})},j=()=>{d({page:"dashboard"})},y=()=>{d({page:"dashboard"})},b=()=>{d({page:"settings"})},h=()=>{localStorage.clear(),sessionStorage.clear(),typeof chrome<"u"&&chrome.storage&&(chrome.storage.session?.remove(["authToken","encryptionKey"]),chrome.storage.local?.remove(["authToken","encryptionKeyCheck","refreshToken","passwords"])),d({page:"login"})},r=()=>{d({page:"password-generator"})},w=()=>{d({page:"dashboard"})};return C?e.jsxs("div",{className:"popup-loading",children:[e.jsx("div",{className:"popup-spinner"}),e.jsx("span",{children:"YÃ¼kleniyor..."})]}):p.page==="unlock-vault"?e.jsx("div",{className:"popup-page",style:{height:"100%",minHeight:"500px"},children:e.jsx(pe,{onUnlock:w,onLogout:h})}):p.page==="login"?e.jsx("div",{className:"popup-page popup-auth",children:e.jsx(ae,{onLoginSuccess:P,onRegister:s})}):p.page==="register"?e.jsx("div",{className:"popup-page popup-auth",children:e.jsx(te,{onRegisterSuccess:N,onBackToLogin:k})}):p.page==="dashboard"?e.jsx("div",{className:"popup-page popup-dashboard",children:e.jsx(oe,{onAddPassword:f,onViewPassword:U,onSettings:b,onPasswordGenerator:r})}):p.page==="password-generator"?e.jsx(ce,{onDashboard:y,onSettings:b,onBack:y}):p.page==="settings"?e.jsx(re,{onDashboard:y,onGenerator:r,onBack:y,onLogout:h}):p.page==="add-password"?e.jsx("div",{className:"popup-page popup-form",children:e.jsx(ne,{onSuccess:j,onCancel:y})}):p.page==="view-password"&&p.passwordId?e.jsx("div",{className:"popup-page popup-detail",children:e.jsx(ie,{id:p.passwordId,onBack:y,onEdit:m})}):p.page==="edit-password"&&p.passwordId?e.jsx("div",{className:"popup-page popup-form",children:e.jsx(le,{id:p.passwordId,onSuccess:y,onCancel:y})}):e.jsxs("div",{className:"popup-page popup-notfound",children:[e.jsx("h2",{children:"Sayfa BulunamadÄ±"}),e.jsx("button",{onClick:y,className:"btn btn-primary",children:"Ana Sayfaya DÃ¶n"})]})};document.getElementById("app")&&J.createRoot(document.getElementById("app")).render(e.jsx(X,{children:e.jsx(ee,{children:e.jsx(se,{children:e.jsx(de,{})})})}));
